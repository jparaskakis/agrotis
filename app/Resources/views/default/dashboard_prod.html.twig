{% extends 'base.html.twig' %}

{% block body_id 'dashboard' %}

{#
    the homepage is a special page which displays neither a header nor a footer.
    this is done with the 'trick' of defining empty Twig blocks without any content
#}
{% block header %}{% endblock %}
{% block footer %}{% endblock %}

{% block body %}

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ asset('css/app.css') }}">
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
    <link rel="stylesheet" href="{{ asset('css/bootstrap-datepicker3.css') }}">
    <link rel="stylesheet" href="{{ asset('css/bootstrap-datepicker3.standalone.css') }}">

    <link rel="stylesheet" href="{{ asset('css/modal.css') }}">
    <!-- Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">


    {#<script async defer src="https://maps.googleapis.com/maps/api/js?key= AIzaSyCSf9vDJJY8WbZ3xPfvOPkz1F6bAMM4unU&callback=getLocation" type="text/javascript"></script>#}

    <script src="{{ asset('js/jquery-1.11.0.min.js') }}"></script>


    <link rel="stylesheet" href="{{ asset('css/modal.css') }}">

    <link rel="stylesheet" href="{{ asset('css/ag_dashboard.css') }}">


    <div class="agcontainer">
        <div class="sidebar">
            <div class="avatar" style="background: url('{{ avatar }}')"></div>
            <div class="line">{{ username }}</div>
            <ul class="sidebar_actions">
                <li class="sidebar_action active">Dashboard<span class="menu-icon fa fa-tachometer"></span></li>
                <li class="sidebar_action">Profile<span class="menu-icon fa fa-user"></span></li>
                <li class="sidebar_action">Add Product<span class="menu-icon fa fa-plus"></span></li>
                <li class="sidebar_action">View Offers<span class="menu-icon fa fa-location-arrow"></span></li>
            </ul>
            <p class="position_bottom center grey">2016 Â© Agrot-IS. All rights reserved.</p></div>
        </div>
        <div class="content">
            <div id="googleMap" style="width:100%;height:100%;" ></div>
        </div>
    </div>


    <script>
        resize();
        getLocation();
        $( window ).resize(function() {
            resize()
        });

        function resize(){
            var WINDOW_WIDTH = window.innerWidth;
            var WINDOW_HEIGHT = window.innerHeight;


            $(".content").css("width", WINDOW_WIDTH - 300);
            $(".content").css("left", 300);

        }

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            }
        }

        function initialize(lat, lon) {
            USER_LAT = lat;
            USER_LON = lon;
            var mapProp = {
                center:new google.maps.LatLng(lat,lon),
                zoom:7,
                mapTypeId:google.maps.MapTypeId.ROADMAP
            };


            var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

        }

        function showPosition(position) {
            initialize( position.coords.latitude,  position.coords.longitude)
        }
    </script>
{% endblock %}
